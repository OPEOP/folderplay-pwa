(this["webpackJsonpfolderplay-pwa"]=this["webpackJsonpfolderplay-pwa"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(0),l=n.n(r),c=n(7),a=n.n(c),o=n(4),u=(n(14),n(6)),i=n.n(u),s=n(8),g=n(3),f=n(9),m=(n(16),n(1)),d=function(e){var t=e.Icon,n=e.onClick;return Object(m.jsx)("button",{onClick:n,children:Object(m.jsx)(t,{className:"icons"})})},p=Object(r.memo)(d),v=function(e){var t=e.tracks,n=e.selected,r=e.onClick;return Object(m.jsx)("ul",{className:"trackList",children:t.map((function(e,t){var l=e.slice(0,e.length-3),c=e===n;return Object(m.jsx)("li",{className:"track ".concat(c?"selectedSong":""),onClick:function(){return r(e)},children:"".concat(c?"> ":"").concat(t+1,". ").concat(l)},e)}))})};v.defaultName="SongList";var b=Object(r.memo)(v),E=n(2),O="NEXT_TRACK",j="PREV_TRACK",y="STOPPED_TRACK",h="STARTED_TRACK",k="PAUSED_TRACK",x="CHANGED_TRACKS",w="CHANGED_TRACK",P={isPlaying:!1,trackIndex:0,currentTrack:null,tracks:[]},C=function(e,t){switch(t.type){case h:return Object(E.a)(Object(E.a)({},e),{},{isPlaying:!0});case k:case y:return Object(E.a)(Object(E.a)({},e),{},{isPlaying:!1});case O:var n=e.trackIndex<e.tracks.length-1?e.trackIndex+1:e.trackIndex;return Object(E.a)(Object(E.a)({},e),{},{trackIndex:n,currentTrack:e.tracks[n],isPlaying:!0});case j:var r=e.trackIndex>0?e.trackIndex-1:e.trackIndex;return Object(E.a)(Object(E.a)({},e),{},{trackIndex:r,currentTrack:e.tracks[r],isPlaying:!0});case w:var l=e.tracks.findIndex((function(e){return e.name===t.payload.trackName})),c=Object(E.a)({},e.tracks[l]);return Object(E.a)(Object(E.a)({},e),{},{trackIndex:l,currentTrack:c,isPlaying:!0});case x:return Object(E.a)(Object(E.a)({},e),{},{trackIndex:0,currentTrack:t.payload.tracks[0],tracks:t.payload.tracks,isPlaying:!1});default:return e}},I=function(){return{type:h}},T=function(){return{type:k}},S=function(){return{type:O}},R=function(){return{type:j}},B=function(e){return{type:x,payload:{tracks:e}}},N=function(e){return{type:w,payload:{trackName:e}}},L=function(e){var t,n=e.tracks,l=void 0===n?[]:n,c=Object(r.useReducer)(C,Object(E.a)(Object(E.a)({},P),{},{tracks:l})),a=Object(g.a)(c,2),o=a[0],u=a[1],i=Object(r.useState)(0),s=Object(g.a)(i,2),f=s[0],m=s[1],d=Object(r.useRef)(),p=Object(r.useRef)(),v=function(){clearInterval(p.current),p.current=setInterval((function(){var e,t;(null===(e=d.current)||void 0===e?void 0:e.ended)?b():m(null===(t=d.current)||void 0===t?void 0:t.currentTime)}),1e3)};Object(r.useEffect)((function(){var e,t;o.isPlaying?(null===(e=d.current)||void 0===e||e.play(),v()):(null===(t=d.current)||void 0===t||t.pause(),clearInterval(p.current))}),[o.isPlaying]);var b=function(){u(S())};return[Object(E.a)(Object(E.a)({},o),{},{duration:null===(t=d.current)||void 0===t?void 0:t.duration,trackProgress:f,audioRef:d}),{onPlay:function(){u(I())},onPause:function(){u(T())},onNextTrack:b,onPrevTrack:function(){u(R())},onTrackChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];u(N(e))},onProgressBarChange:function(e){var t,n=e.target.value;clearInterval(p.current),d.current.currentTime=n,m(null===(t=d.current)||void 0===t?void 0:t.currentTime)},onProgressBarChangeEnd:function(){o.isPlaying||u(I()),v()}},{onTracksChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];u(B(e))}}]};function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function M(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var _=r.createElement("g",null,r.createElement("g",null,r.createElement("path",{d:"M393.538,203.629L102.557,5.543c-9.793-6.666-22.468-7.372-32.94-1.832c-10.472,5.538-17.022,16.413-17.022,28.26v396.173 c0,11.846,6.55,22.721,17.022,28.26c10.471,5.539,23.147,4.834,32.94-1.832l290.981-198.087 c8.746-5.954,13.98-15.848,13.98-26.428C407.519,219.477,402.285,209.582,393.538,203.629z"}))),D=r.createElement("g",null),V=r.createElement("g",null),z=r.createElement("g",null),K=r.createElement("g",null),H=r.createElement("g",null),X=r.createElement("g",null),F=r.createElement("g",null),G=r.createElement("g",null),U=r.createElement("g",null),W=r.createElement("g",null),J=r.createElement("g",null),Y=r.createElement("g",null),Z=r.createElement("g",null),q=r.createElement("g",null),Q=r.createElement("g",null);function $(e,t){var n=e.title,l=e.titleId,c=M(e,["title","titleId"]);return r.createElement("svg",A({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 460.114 460.114",style:{enableBackground:"new 0 0 460.114 460.114"},xmlSpace:"preserve",ref:t,"aria-labelledby":l},c),n?r.createElement("title",{id:l},n):null,_,D,V,z,K,H,X,F,G,U,W,J,Y,Z,q,Q)}var ee=r.forwardRef($);n.p;function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ne(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var re=r.createElement("g",null,r.createElement("path",{d:"M17.991,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C4.729,2.969,7.698,0,11.36,0 l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z"}),r.createElement("path",{d:"M42.877,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631 C29.616,2.969,32.585,0,36.246,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z"})),le=r.createElement("g",null),ce=r.createElement("g",null),ae=r.createElement("g",null),oe=r.createElement("g",null),ue=r.createElement("g",null),ie=r.createElement("g",null),se=r.createElement("g",null),ge=r.createElement("g",null),fe=r.createElement("g",null),me=r.createElement("g",null),de=r.createElement("g",null),pe=r.createElement("g",null),ve=r.createElement("g",null),be=r.createElement("g",null),Ee=r.createElement("g",null);function Oe(e,t){var n=e.title,l=e.titleId,c=ne(e,["title","titleId"]);return r.createElement("svg",te({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 47.607 47.607",style:{enableBackground:"new 0 0 47.607 47.607"},xmlSpace:"preserve",ref:t,"aria-labelledby":l},c),n?r.createElement("title",{id:l},n):null,re,le,ce,ae,oe,ue,ie,se,ge,fe,me,de,pe,ve,be,Ee)}var je=r.forwardRef(Oe);n.p;function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function he(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var ke=r.createElement("g",null,r.createElement("g",null,r.createElement("path",{d:"M355.938,200.956L81.414,12.128c-11.28-7.776-23.012-11.88-33.056-11.88c-22.052,0-36.672,18.496-36.672,48.26v397.036 c0,14.54,4.228,26.688,10.496,35.144c6.364,8.572,16.32,13.108,27.076,13.108c10.04,0,21.308-4.112,32.584-11.876l274.276-188.828 c17.632-12.152,27.3-28.508,27.296-46.076C383.414,229.456,373.594,213.1,355.938,200.956z"}))),xe=r.createElement("g",null,r.createElement("g",null,r.createElement("g",null,r.createElement("path",{d:"M456.446,493.672l-0.293-0.004c-0.048,0-0.095,0.004-0.143,0.004H456.446z"}),r.createElement("path",{d:"M455.638,0L444.29,0.032c-14.86,0-27.724,12.112-27.724,26.992v439.368c0,14.896,12.652,27.124,27.532,27.124 l12.055,0.152c14.805-0.079,25.957-12.412,25.957-27.252V26.996C482.11,12.116,470.51,0,455.638,0z"})))),we=r.createElement("g",null),Pe=r.createElement("g",null),Ce=r.createElement("g",null),Ie=r.createElement("g",null),Te=r.createElement("g",null),Se=r.createElement("g",null),Re=r.createElement("g",null),Be=r.createElement("g",null),Ne=r.createElement("g",null),Le=r.createElement("g",null),Ae=r.createElement("g",null),Me=r.createElement("g",null),_e=r.createElement("g",null),De=r.createElement("g",null),Ve=r.createElement("g",null);function ze(e,t){var n=e.title,l=e.titleId,c=he(e,["title","titleId"]);return r.createElement("svg",ye({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 493.796 493.796",style:{enableBackground:"new 0 0 493.796 493.796"},xmlSpace:"preserve",ref:t,"aria-labelledby":l},c),n?r.createElement("title",{id:l},n):null,ke,xe,we,Pe,Ce,Ie,Te,Se,Re,Be,Ne,Le,Ae,Me,_e,De,Ve)}var Ke=r.forwardRef(ze);n.p;function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xe(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var Fe=r.createElement("g",null,r.createElement("g",null,r.createElement("path",{d:"M447.126,0.236c-10.056,0-20.884,4.12-32.148,11.884L140.882,200.952c-17.644,12.152-27.252,28.504-27.252,46.06 c-0.004,17.56,9.78,33.924,27.428,46.076L415.39,481.784c11.284,7.768,22.568,11.736,32.604,11.736h0.012 c10.76,0,18.916-4.404,25.276-12.972c6.268-8.46,8.688-20.476,8.688-35.012V48.508C481.974,18.74,469.186,0.236,447.126,0.236z"}))),Ge=r.createElement("g",null,r.createElement("g",null,r.createElement("path",{d:"M53.106,0.036L39.894,0C25.018,0,11.55,12.112,11.55,26.996v439.42c0,14.884,13.024,27.1,27.908,27.1h0.456l12.948-0.072 c14.88,0,28.092-12.164,28.092-27.048V27.028C80.958,12.144,67.97,0.036,53.106,0.036z"}))),Ue=r.createElement("g",null),We=r.createElement("g",null),Je=r.createElement("g",null),Ye=r.createElement("g",null),Ze=r.createElement("g",null),qe=r.createElement("g",null),Qe=r.createElement("g",null),$e=r.createElement("g",null),et=r.createElement("g",null),tt=r.createElement("g",null),nt=r.createElement("g",null),rt=r.createElement("g",null),lt=r.createElement("g",null),ct=r.createElement("g",null),at=r.createElement("g",null);function ot(e,t){var n=e.title,l=e.titleId,c=Xe(e,["title","titleId"]);return r.createElement("svg",He({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 493.52 493.52",style:{enableBackground:"new 0 0 493.52 493.52"},xmlSpace:"preserve",ref:t,"aria-labelledby":l},c),n?r.createElement("title",{id:l},n):null,Fe,Ge,Ue,We,Je,Ye,Ze,qe,Qe,$e,et,tt,nt,rt,lt,ct,at)}var ut=r.forwardRef(ot);n.p;function it(){return(it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function st(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var gt=r.createElement("path",{d:"M21,9v9a2,2,0,0,1-2,2H5a2,2,0,0,1-2-2V6A2,2,0,0,1,5,4h5.28a2,2,0,0,1,1.9,1.37L12.72,7H19A2,2,0,0,1,21,9Z",fill:"#464646"});function ft(e,t){var n=e.title,l=e.titleId,c=st(e,["title","titleId"]);return r.createElement("svg",it({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},c),n?r.createElement("title",{id:l},n):null,gt)}var mt=r.forwardRef(ft),dt=(n.p,function(){var e=Object(f.a)({readAs:"DataURL",accept:".mp3"}),t=Object(g.a)(e,2),n=t[0],l=t[1],c=l.filesContent,a=(l.loading,L([])),u=Object(g.a)(a,3),d=u[0],v=d.isPlaying,E=d.tracks,O=d.currentTrack,j=d.duration,y=d.trackProgress,h=d.audioRef,k=u[1],x=k.onPlay,w=k.onPause,P=k.onNextTrack,C=k.onPrevTrack,I=k.onTrackChange,T=k.onProgressBarChange,S=k.onProgressBarChangeEnd,R=u[2].onTracksChange,B=Object(o.b)("files"),N=B.add,A=B.getByID,M=B.deleteByID;Object(r.useEffect)((function(){A(1).then((function(e){if(e){var t=e.tracks;R(t)}})).catch((function(e){return console.log("==>db get all error: ",e)}))}),[]);var _=function(e){R(e);var t=[];e.forEach((function(e){t.push({name:e.name,content:e.content})})),N({tracks:t,id:1}).catch((function(e){return console.log("==>db add error: ",e)}))};Object(r.useEffect)((function(){c.length&&(E.length?M(1).then((function(){_(c)})).catch((function(e){return console.log("==>db clear error: ",e)})):_(c))}),[c]);var D=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("==>Explorer select error: ",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),V=Object(r.useMemo)((function(){return E.map((function(e){return e.name}))}),[E]);return Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)(p,{onClick:D,Icon:mt}),Object(m.jsx)(b,{tracks:V,selected:null===O||void 0===O?void 0:O.name,onClick:I}),Object(m.jsxs)("audio",{hidden:!0,ref:h,className:"audio",controls:!0,src:null===O||void 0===O?void 0:O.content,autoPlay:!0,children:["Your browser does not support the",Object(m.jsx)("code",{children:"audio"})," element."]}),Object(m.jsx)("p",{children:"".concat(j||"00:00")}),Object(m.jsx)("input",{className:"progress",type:"range",value:y,step:"1",min:"0",max:j||0,onChange:T,onMouseUp:S,onDragEnd:S}),Object(m.jsxs)("div",{className:"btnGroup",children:[Object(m.jsx)(p,{onClick:C,Icon:ut}),v?Object(m.jsx)(p,{onClick:w,Icon:je}):Object(m.jsx)(p,{onClick:x,Icon:ee}),Object(m.jsx)(p,{onClick:P,Icon:Ke})]})]})})}),pt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,r=t.getFID,l=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),l(e),c(e),a(e)}))};a.a.render(Object(m.jsx)(l.a.StrictMode,{children:Object(m.jsx)(o.a,{config:{databaseName:"files-player-db",version:1,stores:[{name:"files",id:{keyPath:"id"},indices:[{name:"tracks",keyPath:"tracks"}]}]},children:Object(m.jsx)(dt,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){"".concat("/folderplay-pwa","/service-worker.js");navigator.serviceWorker.register("./service-worker.js",Object(E.a)({},e)).then((function(e){})),navigator.serviceWorker.addEventListener("message",(function(e){console.log("==>Client get message: ",e.data)}))}}(),pt()}},[[18,1,2]]]);
//# sourceMappingURL=main.9c84c844.chunk.js.map